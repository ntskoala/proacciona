<!-- <span class="tooltip" matTooltip="{{'incidencia.'+newIncidencia.estado | translate}}" [matTooltipDisabled]="!empresasService.showTooltips"
    [matTooltipPosition]="'right'">  
<button [disabled]="!permisos.incidencias" class="botonIncidencia" [ngStyle]="{'background-color':getColor()}" mat-mini-fab [color]="colorBoton" (click)="setIncidencia()"> <span class="material-icons">info</span></button>
</span> -->
<div *ngIf="nuevaIncidencia" class="newIncident">
    <form *ngIf="empresasService.administrador || empresasService.userTipo == 'Gerente'"  #newItemForm="ngForm" (ngSubmit)="newItem()">
  
<span class="formIncidencia tooltip" matTooltip="{{'incidencia.nueva' | translate}}" [matTooltipDisabled]="!empresasService.showTooltips" [matTooltipPosition]="'above'">

        <input type="hidden" [(ngModel)]="newIncidencia.id" name="id">
        <input type="hidden" [(ngModel)]="newIncidencia.foto" name="foto">
        <span class="elem">
          <label class="label">{{'incidencia.incidencia' | translate}}</label>
          <input class="itemElem" type="text" [placeholder]="'incidencia.incidencia' | translate" required [(ngModel)]="newIncidencia.incidencia" name="incidencia">
        </span>

        <!-- <span class="elem">
            <label class="label">{{'incidencia.responsable' | translate}}</label>
            <p-dropdown [disabled]="true" styleClass="itemElem"  [style]="{'width':'200px'}" [options]="responsables" [(ngModel)]="newIncidencia.responsable" placeholder="{{'incidencia.responsable' | translate}}"  name="responsable" (onChange)="responsableSelected($event)"></p-dropdown>
      </span>
        <span class="elem">
            <label class="label">{{'incidencia.fecha' | translate}}</label>
            <p-calendar  [disabled]="true" class="itemElem"  #cal appendTo="body" [inputStyle]="{'width':'200px'}" [(ngModel)]="newIncidencia.fecha" [locale]="es" dateFormat="dd/mm/yy"
            hourFormat="24" [showTime]="true" (onSelect)="itemDateEdited(newIncidencia.fecha,$event)" name="fecha">
            <p-footer>
                <button pButton type="button" (click)="okDate(cal)" icon="fa-check" style="margin-left:45%"></button>
            </p-footer>
            <ng-template pTemplate="date" let-date>
                <span [ngStyle]="{backgroundColor: (date.day == selectedDay) ? '#7cc67c' : 'inherit'}" style="border-radius:50%">{{date.day}}</span>
            </ng-template>
        </p-calendar>

        </span> -->
        
        <div class="elem">
            <label  class="label">{{'incidencia.r_cierre' | translate}}</label>
      <p-dropdown styleClass="itemElem"   [options]="responsables" [(ngModel)]="newIncidencia.responsable_cierre" placeholder="{{'incidencia.r_cierre' | translate}}"  name="r_cierre"></p-dropdown>    
</div>
<span class="elem">
    <label class="label">{{'incidencia.descripcion' | translate}}</label>
   <textarea class="itemElem"  pInputTextarea [placeholder]="'incidencia.descripcion' | translate" [(ngModel)]="newIncidencia.descripcion" name="descripcion">
   </textarea>
</span>
        <span class="elem">
            <label class="label">{{'incidencia.solucion' | translate}}</label>
           <textarea class="itemElem"  pInputTextarea [placeholder]="'incidencia.solucion' | translate" [(ngModel)]="newIncidencia.solucion" name="solucion">
           </textarea>
        </span>



            <!-- <span class="elem">
                <label class="label">{{'incidencia.nc' | translate}}</label>
              <select class="smallselect itemElem" required [(ngModel)]="newIncidencia.nc" name="nc">
                <option value="0">--</option>
                <option value="1">{{'incidencia.nc' | translate}}</option>
              </select>
              </span> -->


             
              <span class="elem mini-fab">
          <span class="cell tooltip" matTooltip="{{'subirFoto' | translate}}" [matTooltipDisabled]="!empresasService.showTooltips" [matTooltipPosition]="'above'">      
                  <label *ngIf="empresasService.administrador || empresasService.userTipo == 'Gerente' || empresasService.userTipo == 'Mantenimiento'" class="inputlabelRound" attr.for="{{'foto'}}"><span style="margin-left:60px">{{newIncidencia.foto}}</span></label>                
                  <input *ngIf="empresasService.administrador || empresasService.userTipo == 'Gerente' || empresasService.userTipo == 'Mantenimiento'" id="{{'foto'}}" class="inputfile" type="file" (change)="setImg($event)" accept=".gif,.jpg,.jpeg,.png"/>
                      
                    
                </span>
                </span>
      <div style="height: 15px" ></div>

    </span>
    <div class="buttons">
      <hr class="hr">
      <button type="button" mat-raised-button [disabled]="!newItemForm.form.valid" type="submit" >{{'aceptar' | translate}}</button>
      <button type="button" mat-raised-button (click)="setIncidencia()">{{'cancelar' | translate}}</button>
  </div>
</form>

</div>