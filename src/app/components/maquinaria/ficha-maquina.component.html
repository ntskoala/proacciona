<div class="fichaMaquina">
<form (ngSubmit)="udateMaquina(myMachine.value)" #myMachine="ngForm">
    <mat-grid-list cols="3" rowHeight="65px">
        <mat-grid-tile>
            <mat-grid-tile-header>{{"maquinas.nombre" | translate}}
            </mat-grid-tile-header>
            <input (keypress)="itemEdited()" [readonly]="!empresasService.administrador && empresasService.userTipo !== 'Gerente'  && empresasService.userTipo !== 'Mantenimiento'" md-input class="campo" [placeholder]="'maquinas.Nombre' | translate" type="text"
                required [(ngModel)]="maquina.nombre" name="nombre">
        </mat-grid-tile>

        <mat-grid-tile>
            <mat-grid-tile-header>{{"maquinas.ubicacion" | translate}}
            </mat-grid-tile-header>
            <input (keyup)="itemEdited()" [readonly]="!empresasService.administrador && empresasService.userTipo !== 'Gerente'  && empresasService.userTipo !== 'Mantenimiento'" md-input class="campo" [placeholder]="'maquinas.ubicacion' | translate" type="text"
                [(ngModel)]="maquina.ubicacion" name="ubicacion">
        </mat-grid-tile>

        <mat-grid-tile>
            <mat-grid-tile-header>{{"maquinas.fecha" | translate}}
            </mat-grid-tile-header>
            <input (keyup)="itemEdited()" [readonly]="!empresasService.administrador && empresasService.userTipo !== 'Gerente'  && empresasService.userTipo !== 'Mantenimiento'" md-input class="campo" [placeholder]="'maquinas.fecha' | translate" type="date"
                [(ngModel)]="maquina.fecha_adquisicion" name="fecha_adquisicion">
        </mat-grid-tile>

        <mat-grid-tile>
            <mat-grid-tile-header>{{"maquinas.numserie" | translate}}
            </mat-grid-tile-header>
            <input (keyup)="itemEdited()" [readonly]="!empresasService.administrador && empresasService.userTipo !== 'Gerente'  && empresasService.userTipo !== 'Mantenimiento' " md-input class="campo" [placeholder]="'maquinas.numserie' | translate" type="text"
                [(ngModel)]="maquina.numserie" name="numserie">
        </mat-grid-tile>

        <mat-grid-tile>
            <mat-grid-tile-header>{{"maquinas.fabricante" | translate}}
            </mat-grid-tile-header>
            <input (keyup)="itemEdited()" [readonly]="!empresasService.administrador && empresasService.userTipo !== 'Gerente'  && empresasService.userTipo !== 'Mantenimiento'" md-input class="campo" [placeholder]="'maquinas.fabricante' | translate" type="text"
                [(ngModel)]="maquina.fabricante" name="fabricante">
        </mat-grid-tile>

        <mat-grid-tile>
            <mat-grid-tile-header>{{"maquinas.modelo" | translate}}
            </mat-grid-tile-header>
            <input (keyup)="itemEdited()" [readonly]="!empresasService.administrador && empresasService.userTipo !== 'Gerente'  && empresasService.userTipo !== 'Mantenimiento'" md-input class="campo" [placeholder]="'maquinas.modelo' | translate" type="text"
                [(ngModel)]="maquina.modelo" name="modelo">
        </mat-grid-tile>

        <mat-grid-tile>
            <mat-grid-tile-header>{{"maquinas.codigo_interno" | translate}}
            </mat-grid-tile-header>
            <input (keyup)="itemEdited()" [readonly]="!empresasService.administrador && empresasService.userTipo !== 'Gerente'  && empresasService.userTipo !== 'Mantenimiento'" md-input class="campo" [placeholder]="'maquinas.codigo_interno' | translate" type="text"
                [(ngModel)]="maquina.codigo_interno" name="codigo_interno">
        </mat-grid-tile>

        <mat-grid-tile>
            <mat-grid-tile-header>{{"maquinas.potencia" | translate}}
            </mat-grid-tile-header>
            <input (keyup)="itemEdited()" [readonly]="!empresasService.administrador && empresasService.userTipo !== 'Gerente'  && empresasService.userTipo !== 'Mantenimiento'" md-input class="campo" [placeholder]="'maquinas.potencia' | translate" type="text"
                [(ngModel)]="maquina.potencia" name="potencia">
        </mat-grid-tile>

        <mat-grid-tile>
            <mat-grid-tile-header>{{"maquinas.medidas" | translate}}
            </mat-grid-tile-header>
            <input (keyup)="itemEdited()" [readonly]="!empresasService.administrador && empresasService.userTipo !== 'Gerente'  && empresasService.userTipo !== 'Mantenimiento'" md-input class="campo" [placeholder]="'maquinas.medidas' | translate" type="text"
                [(ngModel)]="maquina.medidas" name="medidas">
        </mat-grid-tile>


        <mat-grid-tile [colspan]="3" [rowspan]="2">
            <mat-grid-tile-header>{{"maquinas.funciones" | translate}}
            </mat-grid-tile-header>
            <textarea (keyup)="itemEdited()" [readonly]="!empresasService.administrador && empresasService.userTipo !== 'Gerente'  && empresasService.userTipo !== 'Mantenimiento'" class="campo fullsize" [placeholder]="'maquinas.funciones' | translate" type="text"
                [(ngModel)]="maquina.funciones" name="funciones"></textarea>

        </mat-grid-tile>

        <mat-grid-tile>
            <mat-grid-tile-header>{{"maquinas.regimen_trabajo" | translate}}
            </mat-grid-tile-header>
            <input (keyup)="itemEdited()" [readonly]="!empresasService.administrador && empresasService.userTipo !== 'Gerente'  && empresasService.userTipo !== 'Mantenimiento'" md-input class="campo" [placeholder]="'maquinas.regimen_trabajo' | translate" type="text"
                [(ngModel)]="maquina.regimen_trabajo" name="regimen_trabajo">
        </mat-grid-tile>

        <mat-grid-tile>
            <mat-grid-tile-header>{{"maquinas.ciclo_productivo" | translate}}
            </mat-grid-tile-header>
            <input (keyup)="itemEdited()" [readonly]="!empresasService.administrador && empresasService.userTipo !== 'Gerente'  && empresasService.userTipo !== 'Mantenimiento'" md-input class="campo" [placeholder]="'maquinas.ciclo_productivo' | translate"
                type="text" [(ngModel)]="maquina.ciclo_productivo" name="ciclo_productivo">
        </mat-grid-tile>

        <mat-grid-tile>
            <mat-grid-tile-header>{{"maquinas.material" | translate}}
            </mat-grid-tile-header>
            <input (keyup)="itemEdited()" [readonly]="!empresasService.administrador && empresasService.userTipo !== 'Gerente'  && empresasService.userTipo !== 'Mantenimiento'" md-input class="campo" [placeholder]="'maquinas.material' | translate" type="text"
                [(ngModel)]="maquina.material" name="material">
        </mat-grid-tile>

        <mat-grid-tile>
            <mat-grid-tile-header>{{"maquinas.liquido_refrigerante" | translate}}
            </mat-grid-tile-header>
            <input (keyup)="itemEdited()" [readonly]="!empresasService.administrador && empresasService.userTipo !== 'Gerente'  && empresasService.userTipo !== 'Mantenimiento'" md-input class="campo" [placeholder]="'maquinas.liquido_refrigerante' | translate"
                type="text" [(ngModel)]="maquina.liquido_refrigerante" name="liquido_refrigerante">
        </mat-grid-tile>

        <mat-grid-tile>
            <mat-grid-tile-header>{{"maquinas.modo_trabajo" | translate}}
            </mat-grid-tile-header>
            <input (keyup)="itemEdited()" [readonly]="!empresasService.administrador && empresasService.userTipo !== 'Gerente'  && empresasService.userTipo !== 'Mantenimiento'" md-input class="campo" [placeholder]="'maquinas.modo_trabajo' | translate" type="text"
                [(ngModel)]="maquina.modo_trabajo" name="modo_trabajo">
        </mat-grid-tile>

        <mat-grid-tile>
            <mat-grid-tile-header>{{"maquinas.lubricacion" | translate}}
            </mat-grid-tile-header>
            <input (keyup)="itemEdited()" [readonly]="!empresasService.administrador && empresasService.userTipo !== 'Gerente'  && empresasService.userTipo !== 'Mantenimiento'" md-input class="campo" [placeholder]="'maquinas.lubricacion' | translate" type="text"
                [(ngModel)]="maquina.lubricacion" name="lubricacion">
        </mat-grid-tile>
    </mat-grid-list>


    <div  class="botones">
    <span class="but">
        <button *ngIf="empresasService.administrador || empresasService.userTipo == 'Gerente' ||Â empresasService.userTipo =='Mantenimiento'" mat-raised-button color="accent" [disabled]="!myMachine.form.valid || !guardar" type="submit">
          <!--<span class="material-icons">save</span>-->{{'maquinas.guardar' | translate}}
    </button>
    </span>
    <span  class="but but2">
        <label *ngIf="empresasService.administrador || empresasService.userTipo == 'Gerente' || empresasService.userTipo =='Mantenimiento'" class="inputlabel" for="doc">{{'maquinas.subir documento' | translate}}</label>
        <input *ngIf="empresasService.administrador || empresasService.userTipo == 'Gerente' || empresasService.userTipo =='Mantenimiento'" id="doc" class="inputfile" type="file" (change)="uploadFunciones($event)" accept=".gif,.jpg,.jpeg,.png"/>
    </span>
    <span  class="but">
        <button type="button" mat-raised-button *ngIf="maquina.doc" color="accent" [disabled]="false" (click)="verFoto('ficha')">
        {{'maquinas.ver documento' | translate}}
        </button>     
    </span>
    <span  class="but but2">
        <label *ngIf="empresasService.administrador || empresasService.userTipo == 'Gerente' || empresasService.userTipo =='Mantenimiento'" class="inputlabel" for="doc2">{{'maquinas.subir foto' | translate}}</label>
        <input *ngIf="empresasService.administrador || empresasService.userTipo == 'Gerente' || empresasService.userTipo =='Mantenimiento'" id="doc2" class="inputfile" type="file" (change)="uploadFunciones($event,'fotomaquina')" accept=".gif,.jpg,.jpeg,.png"/>
    </span>
    <img [src]="image" width="100" (error)="image='./assets/images/pixel.png'" (click)="verFoto('maquina')" />
    </div>
</form>
</div>
<div class="iframeDiv" *ngIf="verdoc" (click)="verdoc=!verdoc">
<!-- <span class="close material-icons" (click)="cerrarFoto()">
        <mat-icon>close</mat-icon></span> -->
        <button  class="close" color="accent" mat-mini-fab (click)="cerrarFoto()"><mat-icon>close</mat-icon></button>

<img   class="iframe" [src]="foto">
</div>